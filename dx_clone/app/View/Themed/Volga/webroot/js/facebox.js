!function(e){function o(o){if(e.facebox.settings.inited)return!0;e.facebox.settings.inited=!0,e(document).trigger("init.facebox"),c();var a=e.facebox.settings.imageTypes.join("|");e.facebox.settings.imageTypesRegexp=new RegExp(".("+a+")$","i"),o&&e.extend(e.facebox.settings,o),e("body").append(e.facebox.settings.faceboxHtml);var t=[new Image,new Image];t[0].src=e.facebox.settings.closeImage,t[1].src=e.facebox.settings.loadingImage,e("#facebox").find(".b:first, .bl").each(function(){t.push(new Image),t.slice(-1).src=e(this).css("background-image").replace(/url\((.+)\)/,"$1")}),e("#facebox .close").click(e.facebox.close),e("#facebox .close_image").attr("src",e.facebox.settings.closeImage)}function a(){var e,o;return self.pageYOffset?(o=self.pageYOffset,e=self.pageXOffset):document.documentElement&&document.documentElement.scrollTop?(o=document.documentElement.scrollTop,e=document.documentElement.scrollLeft):document.body&&(o=document.body.scrollTop,e=document.body.scrollLeft),new Array(e,o)}function c(){var o=e.facebox.settings;o.loadingImage=o.loading_image||o.loadingImage,o.closeImage=o.close_image||o.closeImage,o.imageTypes=o.image_types||o.imageTypes,o.faceboxHtml=o.facebox_html||o.faceboxHtml}function t(o,a,c){if(o.match(/#/)){var t=window.location.href.split("#")[0],f=o.replace(t,"");if("#"==f)return;e.facebox.reveal(e(f).html(),a)}else"iframe"==c.split("|")[0]?n(o,a,c.split("|")[1],c.split("|")[2]):o.match(e.facebox.settings.imageTypesRegexp)?i(o,a):s(o,a)}function n(o,a,c,t){e.facebox.reveal('<iframe scrolling="auto" marginwidth="0" width="'+t+'" height="'+c+'" frameborder="0" src="'+o+'" marginheight="0"></iframe>',a)}function i(o,a){var c=new Image;c.onload=function(){e.facebox.reveal('<div class="image"><img src="'+c.src+'" /></div>',a)},c.src=o}function f(o,a){e.facebox.reveal("<div>"+o+"</div>",a)}function s(o,a){e.get(o,function(o){e.facebox.reveal(o,a)})}function l(){return 0==e.facebox.settings.overlay||null===e.facebox.settings.opacity}function r(){return l()?void 0:(0==e("#facebox_overlay").length&&e("body").append('<div id="facebox_overlay" class="facebox_hide"></div>'),e("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",e.facebox.settings.opacity).click(function(){e(document).trigger("close.facebox")}).fadeIn(200),!1)}function d(){return l()?void 0:(e("#facebox_overlay").fadeOut(200,function(){e("#facebox_overlay").removeClass("facebox_overlayBG"),e("#facebox_overlay").addClass("facebox_hide"),e("#facebox_overlay").remove()}),!1)}e.facebox=function(o,a){e.facebox.loading(),o.ajax?s(o.ajax,a):o.iframe?t(o.iframe,a,o.rev):o.image?i(o.image,a):o.div?t(o.div,a,o.rev):o.text?f(o.text,a):e.isFunction(o)?o.call(e):e.facebox.reveal(o,a)},e.extend(e.facebox,{settings:{opacity:.2,overlay:!0,loadingImage:"/theme/Volga/components/com_virtuemart/assets/images/facebox/loading.gif",closeImage:"/theme/Volga/components/com_virtuemart/assets/images/facebox/closelabel.png",imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <div class="content">         </div>         <a href="#" class="close"></a>       </div>     </div>'},loading:function(){return o(),1==e("#facebox .loading").length?!0:(r(),e("#facebox .content").empty(),e("#facebox .body").children().hide().end().append('<div class="loading"><img src="'+e.facebox.settings.loadingImage+'"/></div>'),e("#facebox").css({top:a()[1]+e(window).height()/10,left:(e(window).width()-e("#facebox").width())/2}).show(),e(document).bind("keydown.facebox",function(o){return 27==o.keyCode&&e.facebox.close(),!0}),void e(document).trigger("loading.facebox"))},reveal:function(o,a){e(document).trigger("beforeReveal.facebox"),a&&e("#facebox .content").addClass(a),e("#facebox .content").append(o),e("#facebox .loading").remove(),e("#facebox .body").children().fadeIn("normal"),e("#facebox").css("left",e(window).width()/2-e("#facebox .popup").width()/2),e(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){return e(document).trigger("close.facebox"),!1}}),e.fn.facebox=function(a){function c(){e.facebox.loading(!0);var o=this.rel.match(/facebox\[?\.(\w+)\]?/);return o&&(o=o[1]),t(this.href,o,this.rev),!1}if(0!=e(this).length)return o(a),this.bind("click.facebox",c)},e(document).bind("close.facebox",function(){e(document).unbind("keydown.facebox"),e("#facebox").fadeOut(function(){e("#facebox .content").removeClass().addClass("content"),e("#facebox .loading").remove(),e(document).trigger("afterClose.facebox")}),d()}),e(document).bind("afterReveal.facebox",function(){var o=e(window).height(),a=e("#facebox").height();if(o>a){var c=e(window).scrollTop(),t=Math.floor((o-a)/2)+c;e("#facebox").css("top",t)}else e("#facebox").css("top",e(window).scrollTop())})}(jQuery);